@echo off
chcp 65001 >nul
echo ============================================================
echo 1. 检查 Git 状态
echo ============================================================
git status

echo.
echo ============================================================
echo 2. 添加所有更改
echo ============================================================
git add -A

echo.
echo ============================================================
echo 3. 再次检查状态
echo ============================================================
git status

echo.
echo ============================================================
echo 4. 提交更改
echo ============================================================
git commit -m "feat: 添加数据库迁移和应用启动功能" -m "- 创建环境配置文件 (.env)" -m "- 添加数据库迁移测试 (11个测试用例)" -m "- 成功运行数据库迁移 (agents, runs, tasks表)" -m "- 添加应用启动测试 (10个测试用例)" -m "- 启动FastAPI应用服务器" -m "- 所有99个测试通过，代码覆盖率89%%" -m "- 修复CORS_ORIGINS环境变量格式问题"

echo.
echo ============================================================
echo 5. 推送到 GitHub
echo ============================================================
git push origin main

echo.
if %ERRORLEVEL% EQU 0 (
    echo ✅ 成功推送到 GitHub!
) else (
    echo ❌ 推送失败，请检查错误信息
)

pause
