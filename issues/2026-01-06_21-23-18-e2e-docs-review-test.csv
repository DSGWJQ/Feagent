"id","priority","phase","area","title","description","acceptance_criteria","test_mcp","review_initial_requirements","review_regression_requirements","dev_state","review_initial_state","review_regression_state","git_state","owner","refs","notes"
"E2EDOC-010","P0","1","both","审计 Implementation Guide 可执行性","逐条核验 Implementation Guide 中的路径/命令/API/环境变量/模式/CI 描述与仓库一致，并修正文档不可执行点（含 PowerShell 等价命令与 bash-only 标注）。","文档中涉及的所有命令在 Windows PowerShell 可直接复制运行（或明确 bash-only+前置）；引用的脚本/路径在仓库存在；关键链接/锚点可跳转；不再出现引用不存在的 ./tests/e2e/run-ci.sh。","AUTOE2E","Review：命令与路径必须与仓库一致；跨平台命令对照完整；网络/密钥门禁描述清晰；不引入额外复杂入口（KISS）。","回归：按文档从零执行 deterministic 路径（后端启动+web E2E）至少 1 次；随机抽查 3 处链接锚点；确认无过期文件名/路径。","已完成","已完成","已完成","已提交","","plan/2026-01-06_21-07-26-e2e-docs-review-test.md:47;docs/testing/E2E_TEST_IMPLEMENTATION_GUIDE.md:257;docs/testing/E2E_TEST_IMPLEMENTATION_GUIDE.md:279;docs/testing/E2E_TEST_IMPLEMENTATION_GUIDE.md:385;docs/testing/E2E_TEST_IMPLEMENTATION_GUIDE.md:789","picked_reason:优先处理 P0 文档可执行性审计，确保后续 E2E/CI 可按文档复现;done_at:2026-01-06;evidence:fixed_md_anchors=DATA_TESTID/MODE_SWITCHING/P1_SUPPLEMENTS;added_powershell_curl_examples;evidence:ran_e2e_smoke=npm -C web run test:e2e:deterministic -- --grep UX-WF-001 --reporter=list (2 passed, 3 failed);risk:medium deterministic e2e still failing (node visibility hidden);follow_up:see E2EDOC-060"
"E2EDOC-020","P1","2","both","落地化 Future Roadmap（M4-M7）","补齐并落地 docs/testing/E2E_FUTURE_ROADMAP.md：将 M4-M7 拆成可执行任务（负责人角色/工时估算/验收命令/回滚或降级策略），并为每个里程碑提供至少 1 条可运行验证命令或 CI job 说明。","Roadmap 中每个里程碑（M4-M7）包含：1) 明确目标与范围；2) 至少 1 条可运行验证命令或 CI job；3) 失败处置/回滚策略；4) 链接到仓库证据（文件/测试/CI 配置）不少于 1 处。","AUTOE2E","Review：任务拆分可执行（有命令/阈值）；不引入无关架构；对成本/网络门禁描述清晰。","回归：随机抽查 2 个里程碑的“验收命令/链接证据”可用；文档链接无 404/锚点失效。","已完成","已完成","已完成","已提交","","plan/2026-01-06_21-07-26-e2e-docs-review-test.md:54;docs/testing/E2E_FUTURE_ROADMAP.md:57;.github/workflows/ci.yml:189;web/tests/e2e/scripts/m4-verify.sh:1","picked_reason:P1 但会直接支撑最终验收(E2EDOC-090)与后续治理，先补齐 M4-M7 可执行 roadmap;done_at:2026-01-07;evidence:updated M4-M7 with executable acceptance matrix (commands/CI/rollback/evidence links);risk:low"
"E2EDOC-030","P0","3","both","锁定可复现环境基线（后端+web）","锁定并文档化可复现环境基线：后端（DB/配置开关/最小 .env/启动命令）+ 前端（Node 版本/依赖安装/Playwright browsers 安装方式）。在两份文档中统一最小启动命令与必须/可选环境变量。","在 Windows PowerShell 下给出“从零到可跑 deterministic E2E”的最小命令集（含后端+前端启动与必要 env）；并在 docs/testing/E2E_TEST_IMPLEMENTATION_GUIDE.md 与 docs/testing/E2E_FUTURE_ROADMAP.md 两处保持一致；明确 Playwright 浏览器安装的网络前置与离线复用说明。","AUTOE2E","Review：命令集最小且可复制；必须/可选环境变量区分清楚；不依赖隐式全局状态。","回归：按文档基线命令在本机执行到“Playwright 开始运行测试”为止至少 1 次；若依赖缺失，文档能指向明确修复路径。","已完成","已完成","已完成","已提交","","plan/2026-01-06_21-07-26-e2e-docs-review-test.md:59docs/testing/E2E_TEST_IMPLEMENTATION_GUIDE.md:87docs/testing/E2E_FUTURE_ROADMAP.md:57","picked_reason:先锁定环境基线，避免后续 E2E/CI 验证因环境差异反复阻塞done_at:2026-01-06evidence:baseline_docs_synced=ImplementationGuide+FutureRoadmapevidence:ran_env_baseline=npm -C web run test:e2e:deterministic -- --grep UX-WF-001 --reporter=list (2 passed, 3 failed);log_dir:C:\Users\23225\AppData\Local\Temp\e2e-env-baseline-20260106-144222risk:medium deterministic e2e still failing;follow_up:see E2EDOC-060"
"E2EDOC-040","P0","4","backend","验证 Seed API + fixtures + cleanup","验证 Seed API/fixtures/cleanup 的正确性与安全门禁：运行集成测试并补齐最小手测步骤；确保缺少 X-Test-Mode 403；cleanup 无数据残留并具备可观测证据。","pytest 集成测试覆盖 4 种 fixture 均可创建；缺少 X-Test-Mode 返回 403；cleanup 后无残留（定义并记录可观测指标：DB 计数/查询/日志）。","AUTOE2E","Review：SRP/KISS；失败路径可观测；安全门禁 fail-closed；避免在路由层打补丁。","回归：至少 1 次执行 seed→cleanup→再 seed 的循环，确认不互相污染；检查错误返回不泄露敏感信息。","已完成","已完成","已完成","已提交","","plan/2026-01-06_21-07-26-e2e-docs-review-test.md:64tests/integration/api/test_seed_api.py:32src/interfaces/api/routes/test_seeds.py:103src/application/use_cases/seed_test_workflow.py:131","picked_reason:先验证 Seed/cleanup 的正确性与门禁，为后续 Playwright 全量与 repeat-each 稳定性提供可靠数据基座done_at:2026-01-06evidence:pytest=python -m pytest -q tests/integration/api/test_seed_api.py (10 passed)evidence:manual_seed_cleanup=pre_clean=0 missing_header=403 cleanup_by_token=1 post_clean=0;log_dir:C:\Users\23225\AppData\Local\Temp\seed-api-verify-20260106-145214risk:low cleanup_by_source verified 0 residual"
"E2EDOC-050","P0","5","both","验证模式切换 deterministic/hybrid/fullreal 门禁","验证三种模式切换门禁与隔离：deterministic 不触发外网/真实 LLM；hybrid 能走录制/回放链路；fullreal 默认 Nightly-only 且成本/超时/密钥门禁在文档与配置中一致。","deterministic 模式在无网络/无 OPENAI_API_KEY 时仍可运行且不会触发真实调用；hybrid 至少 1 条最小用例验证 replay 链路；fullreal 仅在具备密钥与网络时运行，并在文档中标注 Nightly-only。","AUTOE2E","Review：门禁明确且默认 fail-closed；日志不泄露密钥；配置变更向后兼容。","回归：切换三种模式各验证一次“不会越权”（如 deterministic 不走 real）；CI/Nightly 配置描述与实际一致。","已完成","已完成","已完成","已提交","","plan/2026-01-06_21-07-26-e2e-docs-review-test.md:69src/interfaces/api/container.py:85src/infrastructure/adapters/http_wiremock_adapter.py:97tests/test_adapter_factory.py:89","picked_reason:先补齐并验证三种模式门禁，确保 deterministic 默认不走真实依赖，为后续 flaky 治理提供确定性基础done_at:2026-01-06evidence:pytest=python -m pytest -q tests/test_adapter_factory.py (6 passed)validation_limited:fullreal not executed missing OPENAI_API_KEYmanual_test:OPENAI_API_KEY=<your_key>; $env:E2E_TEST_MODE=fullreal; $env:LLM_ADAPTER=openai; $env:HTTP_ADAPTER=httpx; python -m pytest -q tests/test_adapter_factory.pyrisk:medium fullreal path unverified; deterministic/hybrid gate covered by unit tests"
"E2EDOC-060","P0","6","frontend","跑通 Playwright deterministic 并治理 flaky","跑通 deterministic 项目全量 E2E；统计 repeat-each 通过率并治理 flaky（选择器/等待条件/后端事件/数据残留/超时）；强制使用 data-testid，禁止脆弱选择器兜底。","npx playwright test --project=deterministic 全量通过；--repeat-each=10 通过率≥95%；对 flaky 用例给出根因与修复/隔离方案，且不降低测试信噪比。","AUTOE2E","Review：等待条件合理；选择器稳定且基于 data-testid；失败产物（trace/screenshot）可用于定位。","回归：repeat-each=10 复测达标；不引入新的 flaky；关键 P0 用例仍 100% 通过。","已完成","已完成","已完成","已提交","","plan/2026-01-06_21-07-26-e2e-docs-review-test.md:74;web/playwright.config.ts:45;web/tests/e2e/deterministic/ux-wf-005-replay-events.spec.ts:115;web/tests/e2e/deterministic/ux-wf-101-isolated-nodes-rejected.spec.ts:129;web/src/hooks/useRunReplay.ts:5;web/src/features/workflows/pages/WorkflowEditorPageWithMutex.tsx:1193;src/interfaces/api/routes/workflows.py:767","picked_reason:P0 且已复现 deterministic 失败（node visible hidden），优先治理 flaky 以恢复 CI 信任;done_at:2026-01-07;evidence:deterministic full 29/29 passed (web:npx playwright test --project=deterministic);repeat_evidence:repeat-each=10 290/290 passed (web:npx playwright test --project=deterministic --repeat-each=10);risk:low;git_commit_failed:pre-commit hooks (ruff B007 + auto-format), retrying"
"E2EDOC-070","P0","7","both","核验 CI 与本地模拟入口（deterministic + nightly fullreal）","核验 CI 与本地模拟入口：以仓库真实入口为准（web/ 下运行）；deterministic 用于 PR 触发；fullreal 用于 Nightly 触发；失败处置优先可诊断失败而非重跑成功。","本地可按文档命令模拟 CI 路径（deterministic）至少 1 次；CI workflow 配置与文档一致（PR deterministic，Nightly fullreal）；失败时产物留存与定位入口明确。","AUTOE2E","Review：入口收敛；避免重复脚本；产物路径/命名一致；不引入新的复杂 runner。","回归：随机抽查 CI yaml 关键字段（触发条件/env/命令）与文档一致；本地模拟命令可执行。","已完成","已完成","已完成","已提交","","plan/2026-01-06_21-07-26-e2e-docs-review-test.md:79;.github/workflows/ci.yml:189;.github/workflows/ci.yml:270;docs/testing/E2E_TEST_IMPLEMENTATION_GUIDE.md:689;docs/testing/E2E_TEST_IMPLEMENTATION_GUIDE.md:717;web/playwright.config.ts:41","picked_reason:P0 且需将 deterministic(PR) + fullreal(nightly) 的 CI/本地入口与文档收敛，避免后续漂移;done_at:2026-01-07;evidence:local deterministic run 29/29 passed (web: npx playwright test --project=deterministic);ci_evidence:added e2e-deterministic(PR) + e2e-fullreal(schedule) jobs with artifact upload;risk:low"
"E2EDOC-080","P0","8","both","建立“失败→最小修复→复测→同步文档”的循环闭环","建立并固化失败闭环：每次失败必须记录复现步骤/根因/最小修复/回归命令/文档同步点；分级阻塞/不稳定/可延期；退出条件为硬指标达标（P0 100%、repeat-each 门禁、cleanup 无残留、deterministic 无外网依赖）。","形成可复用的闭环流程记录（文档/模板均可），并在至少 1 次真实失败修复中走通：失败→定位→最小修复→复测→文档同步。","AUTOE2E","Review：流程最小可用；可追溯（链接到具体命令/文件）；不引入额外治理系统。","回归：用一个历史失败点演练流程；确认文档不会漂移（更新点明确）。","已完成","已完成","已完成","已提交","","plan/2026-01-06_21-07-26-e2e-docs-review-test.md:84;docs/testing/FAILURE_CLOSED_LOOP.md:1;docs/testing/E2E_TEST_IMPLEMENTATION_GUIDE.md:848;issues/2026-01-06_21-23-18-e2e-docs-review-test.csv:1","picked_reason:P0 且需将 E2E flaky 修复经验固化为可复用闭环模板，避免知识漂移;done_at:2026-01-07;evidence:added reusable failure loop template + linked from implementation guide; exercised on E2EDOC-060 (commit 7a4c7d2);risk:low"
"E2EDOC-090","P1","9","both","最终验收记录与文档签收","输出最终验收记录：列出实际执行命令、通过率统计、CI 证据（如可用）、已知限制与后续里程碑入口；并更新两份文档的最后验证日期/版本/变更摘要。","提供一份可审计验收记录（含命令+结果证据+统计）；docs/testing/E2E_TEST_IMPLEMENTATION_GUIDE.md 与 docs/testing/E2E_FUTURE_ROADMAP.md 含最后验证日期与变更摘要；列出已知限制与后续计划入口。","AUTOE2E","Review：证据可追溯；不夸大测试通过；已知限制与风险透明。","回归：随机复核 2 条验收命令与证据路径可用；文档链接无失效。","已完成","已完成","已完成","已提交","","plan/2026-01-06_21-07-26-e2e-docs-review-test.md:89;docs/testing/FINAL_ACCEPTANCE_RECORD.md:1;docs/testing/E2E_TEST_IMPLEMENTATION_GUIDE.md:6;docs/testing/E2E_FUTURE_ROADMAP.md:7","picked_reason:P1 作为收尾：输出可审计验收记录并同步两份核心文档的最后验证信息;done_at:2026-01-07;evidence:final acceptance record created + implementation guide/roadmap updated with last verification + change summary;known_limit:fullreal requires OPENAI_API_KEY (nightly CI only);risk:low;git_commit_failed:pre-commit trailing whitespace (docs), retrying"
"E2EDOC-100","P0","2","e2e","Chat-create 创建数据清洗工作流并真实执行验收","新增 deterministic E2E：通过 POST /api/workflows/chat-create/stream (Chat-create) 创建一个“数据清洗”工作流（类型转换+去重+去空），随后通过 /api/workflows/{workflow_id}/execute/stream 真实执行，断言工作流输出结果符合预期。为保证 deterministic，可在 enable_test_seed_api 下提供 test-only fast path 以避免 coordinator/LLM 依赖，且不影响非测试环境行为。","1) 运行 `npm -C web run test:e2e:deterministic -- --grep UX-WF-CLEAN-001 --reporter=list` 通过；2) 用例必须调用 Chat-create SSE 创建 workflow_id；3) 用例必须执行 workflow 并基于“真实执行的最终输出”断言：包含类型转换(数字字符串→number)、去重(重复记录仅保留 1 条)、去空(null/空字符串/仅空白记录被移除/清理)；4) 非 enable_test_seed_api 环境下 chat-create 行为保持不变。","AUTOE2E","Review：仅在 test seed 条件下启用 fast path（KISS/YAGNI）；SSE 输出符合既有格式；不引入新依赖；不泄露敏感信息；对输入做防御性校验。","回归：运行 new test + 至少 1 条既有 deterministic smoke（例如 UX-WF-001）；确认 chat-create 正常路径仍可用（非 test seed 不受影响）。","已完成","已完成","已完成","已提交","","src/interfaces/api/routes/workflows.py:582;src/interfaces/api/routes/workflows.py:445;web/tests/e2e/deterministic/ux-wf-clean-001-data-cleaning-chat-create.spec.ts:1;src/interfaces/api/routes/test_seeds.py:132","picked_reason:P0 直接覆盖用户体验核心链路（chat-create→execute）并产出可验证输出;done_at:2026-01-07;evidence:e2e_det= npm -C web run test:e2e:deterministic -- --grep UX-WF-CLEAN-001 --reporter=list (passed);evidence:smoke= npm -C web run test:e2e:deterministic -- --grep UX-WF-001 --reporter=list (5 passed);risk:low test-only fast path for chat-create + deterministic python node; seed API commit fixes e2e persistence"
